<%= form_with model: client, local: true do |form| %>
  <% if client.errors.any? %>
    <div class="alert alert-danger">
      <h4><%= pluralize(client.errors.count, "erro") %> impediram o cadastro:</h4>
      <ul class="mb-0">
        <% client.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="row">
    <div class="col-md-6">
      <div class="mb-3">
        <%= form.label :name, "Nome", class: "form-label" %>
        <%= form.text_field :name, class: "form-control" %>
      </div>
    </div>
    
    <div class="col-md-6">
      <div class="mb-3">
        <%= form.label :phone_number, "Telefone", class: "form-label" %>
        <%= form.text_field :phone_number, class: "form-control" %>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4">
      <div class="mb-3">
        <%= form.label :start_date, "Data de Início", class: "form-label" %>
        <%= form.date_field :start_date, class: "form-control" %>
      </div>
    </div>
    
    <div class="col-md-4">
      <div class="mb-3">
        <%= form.label :end_date, "Data de Fim", class: "form-label" %>
        <%= form.date_field :end_date, class: "form-control" %>
      </div>
    </div>
    
    <div class="col-md-4">
      <div class="mb-3">
        <%= form.label :paid_amount, "Valor Pago (R$)", class: "form-label" %>
        <%= form.number_field :paid_amount, step: 0.01, class: "form-control" %>
      </div>
    </div>
    <div class="mb-3">
      <%= form.label :plan_type, "Tipo de Plano", class: "form-label" %>
      <%= form.select :plan_type, 
            options_for_select([
              ['Mensal', 'monthly'],
              ['Trimestral', 'quarterly'],
              ['Semestral', 'semiannual'],
              ['Anual', 'annual']
            ], form.object.plan_type),
            { include_blank: "Selecione um plano" },
            class: "form-select" %>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="mb-3">
        <%= form.label :status, "Status", class: "form-label" %>
        <%= form.select :status, options_for_select([
          ['Ativo', 'active'],
          ['Inativo', 'inactive'],
          ['Finalizado', 'completed']
        ], client.status), {}, { class: "form-select" } %>
      </div>
    </div>
  </div>

  <div class="mb-3">
    <%= form.label :note, "Observações", class: "form-label" %>
    <%= form.text_area :note, rows: 4, class: "form-control", 
    placeholder: "Adicione observações sobre as recomendações do que você pretende para o seu paciente (cardio, modo de preparo, quantidade de água consumida e recomendações gerais...)" %>
  </div>
  
  <div class="mb-3">
    <%= form.submit client.persisted? ? "Atualizar Cliente" : "Criar Cliente", 
                    class: "btn btn-success me-2" %>
    <%= link_to "Voltar", client.persisted? ? client : clients_path, 
                class: "btn btn-secondary" %>
  </div>
<% end %>
